Reviewing staged changes.
[init_state] Initializing ReviewState
+--------------------- Traceback (most recent call last) ---------------------+
| C:\Users\Preslav\Documents\Softuni\AICodeReviewProject\gitkritik2\gitkritik |
| 2\cli\main.py:59 in main                                                    |
|                                                                             |
|   56                                                                        |
|   57     # Run the LangGraph                                                |
|   58     graph = build_review_graph().compile()                             |
| > 59     final_state_dict = graph.invoke(state_dict)                        |
|   60     final_state = ReviewState(**final_state_dict)                      |
|   61                                                                        |
|   62     # In local mode, render review nicely                              |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| |    all_files = False                                                    | |
| |           ci = False                                                    | |
| |       config = None                                                     | |
| |      dry_run = False                                                    | |
| |        graph = CompiledStateGraph(                                      | |
| |                    nodes={                                              | |
| |                        '__start__': PregelNode(                         | |
| |                            config={'tags': ['langsmith:hidden']},       | |
| |                            channels=['__start__'],                      | |
| |                            triggers=['__start__'],                      | |
| |                            writers=[                                    | |
| |                                ChannelWrite<kritik_config,changed_fileЕ | |
| |                writes=[ChannelWriteEntry(channel='kritik_config',       | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='start:init_state',            | |
| |                value='__start__', skip_none=False, mapper=None)]),      | |
| |                                ChannelWrite<start:init_state>(recurse=Е | |
| |                writes=[ChannelWriteEntry(channel='start:init_state',    | |
| |                value='__start__', skip_none=False, mapper=None)])       | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'init_state': PregelNode(                        | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['start:init_state'],               | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<init_state,kritik_config,cЕ | |
| |                writes=[ChannelWriteEntry(channel='init_state',          | |
| |                value='init_state', skip_none=False, mapper=None),       | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'detect_changes': PregelNode(                    | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['init_state'],                     | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<detect_changes,kritik_confЕ | |
| |                writes=[ChannelWriteEntry(channel='detect_changes',      | |
| |                value='detect_changes', skip_none=False, mapper=None),   | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'prepare_context': PregelNode(                   | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['detect_changes'],                 | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<prepare_context,kritik_conЕ | |
| |                writes=[ChannelWriteEntry(channel='prepare_context',     | |
| |                value='prepare_context', skip_none=False, mapper=None),  | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'style_agent': PregelNode(                       | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['prepare_context'],                | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<style_agent,kritik_config,Е | |
| |                writes=[ChannelWriteEntry(channel='style_agent',         | |
| |                value='style_agent', skip_none=False, mapper=None),      | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'bug_agent': PregelNode(                         | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['style_agent'],                    | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<bug_agent,kritik_config,chЕ | |
| |                writes=[ChannelWriteEntry(channel='bug_agent',           | |
| |                value='bug_agent', skip_none=False, mapper=None),        | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'context_agent': PregelNode(                     | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['bug_agent'],                      | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<context_agent,kritik_confiЕ | |
| |                writes=[ChannelWriteEntry(channel='context_agent',       | |
| |                value='context_agent', skip_none=False, mapper=None),    | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'summary_agent': PregelNode(                     | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['context_agent'],                  | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<summary_agent,kritik_confiЕ | |
| |                writes=[ChannelWriteEntry(channel='summary_agent',       | |
| |                value='summary_agent', skip_none=False, mapper=None),    | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'merge_results': PregelNode(                     | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['summary_agent'],                  | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<merge_results,kritik_confiЕ | |
| |                writes=[ChannelWriteEntry(channel='merge_results',       | |
| |                value='merge_results', skip_none=False, mapper=None),    | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        'format_output': PregelNode(                     | |
| |                            config={'tags': []},                         | |
| |                            channels={                                   | |
| |                                'kritik_config': 'kritik_config',        | |
| |                                'changed_files': 'changed_files',        | |
| |                                'file_contexts': 'file_contexts',        | |
| |                                'agent_results': 'agent_results',        | |
| |                                'inline_comments': 'inline_comments',    | |
| |                                'summary_review': 'summary_review'       | |
| |                            },                                           | |
| |                            triggers=['merge_results'],                  | |
| |                            mapper=functools.partial(<function           | |
| |                _coerce_state at 0x0000017BA3089F80>, <class             | |
| |                'gitkritik2.core.models.ReviewState'>),                  | |
| |                            writers=[                                    | |
| |                                ChannelWrite<format_output,kritik_confiЕ | |
| |                writes=[ChannelWriteEntry(channel='format_output',       | |
| |                value='format_output', skip_none=False, mapper=None),    | |
| |                ChannelWriteEntry(channel='kritik_config', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='changed_files', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='file_contexts', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='agent_results', value=<object | |
| |                object at 0x0000017B9EE12830>, skip_none=False,          | |
| |                mapper=_get_state_key(recurse=False)),                   | |
| |                ChannelWriteEntry(channel='inline_comments',             | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False)),  | |
| |                ChannelWriteEntry(channel='summary_review',              | |
| |                value=<object object at 0x0000017B9EE12830>,             | |
| |                skip_none=False, mapper=_get_state_key(recurse=False))]) | |
| |                            ]                                            | |
| |                        ),                                               | |
| |                        ... +2                                           | |
| |                    },                                                   | |
| |                    channels={                                           | |
| |                        'kritik_config':                                 | |
| |                <langgraph.channels.last_value.LastValue object at       | |
| |                0x0000017BB9CC52B0>,                                     | |
| |                        'changed_files':                                 | |
| |                <langgraph.channels.last_value.LastValue object at       | |
| |                0x0000017B9F049950>,                                     | |
| |                        'file_contexts':                                 | |
| |                <langgraph.channels.last_value.LastValue object at       | |
| |                0x0000017BB9CA2210>,                                     | |
| |                        'agent_results':                                 | |
| |                <langgraph.channels.last_value.LastValue object at       | |
| |                0x0000017BB9C3EB10>,                                     | |
| |                        'inline_comments':                               | |
| |                <langgraph.channels.last_value.LastValue object at       | |
| |                0x0000017BB9C3EC40>,                                     | |
| |                        'summary_review':                                | |
| |                <langgraph.channels.last_value.LastValue object at       | |
| |                0x0000017BB9C5B410>,                                     | |
| |                        '__start__':                                     | |
| |                <langgraph.channels.ephemeral_value.EphemeralValue       | |
| |                object at 0x0000017BB9CC5550>,                           | |
| |                        'init_state':                                    | |
| |                <langgraph.channels.ephemeral_value.EphemeralValue       | |
| |                object at 0x0000017BB9CA1E50>,                           | |
| |                        'detect_changes':                                | |
| |                <langgraph.channels.ephemeral_value.EphemeralValue       | |
| |                object at 0x0000017BB9CA2C10>,                           | |
| |                        'prepare_context':                               | |
| |                <langgraph.channels.ephemeral_value.EphemeralValue       | |
| |                object at 0x0000017BB9C3F950>,                           | |
| |                        ... +9                                           | |
| |                    },                                                   | |
| |                    auto_validate=False,                                 | |
| |                    stream_mode='updates',                               | |
| |                    output_channels=[                                    | |
| |                        'kritik_config',                                 | |
| |                        'changed_files',                                 | |
| |                        'file_contexts',                                 | |
| |                        'agent_results',                                 | |
| |                        'inline_comments',                               | |
| |                        'summary_review'                                 | |
| |                    ],                                                   | |
| |                    stream_channels=[                                    | |
| |                        'kritik_config',                                 | |
| |                        'changed_files',                                 | |
| |                        'file_contexts',                                 | |
| |                        'agent_results',                                 | |
| |                        'inline_comments',                               | |
| |                        'summary_review'                                 | |
| |                    ],                                                   | |
| |                    input_channels='__start__',                          | |
| |                    builder=<langgraph.graph.state.StateGraph object at  | |
| |                0x0000017BB9CC5010>                                      | |
| |                )                                                        | |
| | side_by_side = False                                                    | |
| |        state = ReviewState(                                             | |
| |                    kritik_config=None,                                  | |
| |                    changed_files=[],                                    | |
| |                    file_contexts={},                                    | |
| |                    agent_results={},                                    | |
| |                    inline_comments=[],                                  | |
| |                    summary_review=None                                  | |
| |                )                                                        | |
| |   state_dict = {                                                        | |
| |                    'kritik_config': None,                               | |
| |                    'changed_files': [],                                 | |
| |                    'file_contexts': {},                                 | |
| |                    'agent_results': {},                                 | |
| |                    'inline_comments': [],                               | |
| |                    'summary_review': None,                              | |
| |                    'unstaged': False,                                   | |
| |                    'all_files': False,                                  | |
| |                    'side_by_side': False                                | |
| |                }                                                        | |
| |     unstaged = False                                                    | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\pregel\__init__.py:1104 in invoke     |
|                                                                             |
|   1101             latest: Union[dict[str, Any], Any] = None                |
|   1102         else:                                                        |
|   1103             chunks = []                                              |
| > 1104         for chunk in self.stream(                                    |
|   1105             input,                                                   |
|   1106             config,                                                  |
|   1107             stream_mode=stream_mode,                                 |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| |            chunk = {                                                    | |
| |                        'kritik_config': None,                           | |
| |                        'changed_files': [],                             | |
| |                        'file_contexts': {},                             | |
| |                        'agent_results': {},                             | |
| |                        'inline_comments': [],                           | |
| |                        'summary_review': None                           | |
| |                    }                                                    | |
| |           config = None                                                 | |
| |            debug = None                                                 | |
| |            input = {                                                    | |
| |                        'kritik_config': None,                           | |
| |                        'changed_files': [],                             | |
| |                        'file_contexts': {},                             | |
| |                        'agent_results': {},                             | |
| |                        'inline_comments': [],                           | |
| |                        'summary_review': None,                          | |
| |                        'unstaged': False,                               | |
| |                        'all_files': False,                              | |
| |                        'side_by_side': False                            | |
| |                    }                                                    | |
| |       input_keys = None                                                 | |
| |  interrupt_after = None                                                 | |
| | interrupt_before = None                                                 | |
| |           kwargs = {}                                                   | |
| |           latest = {                                                    | |
| |                        'kritik_config': None,                           | |
| |                        'changed_files': [],                             | |
| |                        'file_contexts': {},                             | |
| |                        'agent_results': {},                             | |
| |                        'inline_comments': [],                           | |
| |                        'summary_review': None                           | |
| |                    }                                                    | |
| |      output_keys = [                                                    | |
| |                        'kritik_config',                                 | |
| |                        'changed_files',                                 | |
| |                        'file_contexts',                                 | |
| |                        'agent_results',                                 | |
| |                        'inline_comments',                               | |
| |                        'summary_review'                                 | |
| |                    ]                                                    | |
| |             self = CompiledStateGraph(                                  | |
| |                        nodes={                                          | |
| |                            '__start__': PregelNode(                     | |
| |                                config={'tags': ['langsmith:hidden']},   | |
| |                                channels=['__start__'],                  | |
| |                                triggers=['__start__'],                  | |
| |                                writers=[                                | |
| |                                    ChannelWrite<kritik_config,changed_Е | |
| |                    writes=[ChannelWriteEntry(channel='kritik_config',   | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='start:init_state',        | |
| |                    value='__start__', skip_none=False, mapper=None)]),  | |
| |                                    ChannelWrite<start:init_state>(recuЕ | |
| |                    writes=[ChannelWriteEntry(channel='start:init_stateЕ | |
| |                    value='__start__', skip_none=False, mapper=None)])   | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'init_state': PregelNode(                    | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['start:init_state'],           | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<init_state,kritik_confЕ | |
| |                    writes=[ChannelWriteEntry(channel='init_state',      | |
| |                    value='init_state', skip_none=False, mapper=None),   | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'detect_changes': PregelNode(                | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['init_state'],                 | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<detect_changes,kritik_Е | |
| |                    writes=[ChannelWriteEntry(channel='detect_changes',  | |
| |                    value='detect_changes', skip_none=False,             | |
| |                    mapper=None),                                        | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'prepare_context': PregelNode(               | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['detect_changes'],             | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<prepare_context,kritikЕ | |
| |                    writes=[ChannelWriteEntry(channel='prepare_context', | |
| |                    value='prepare_context', skip_none=False,            | |
| |                    mapper=None),                                        | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'style_agent': PregelNode(                   | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['prepare_context'],            | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<style_agent,kritik_conЕ | |
| |                    writes=[ChannelWriteEntry(channel='style_agent',     | |
| |                    value='style_agent', skip_none=False, mapper=None),  | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'bug_agent': PregelNode(                     | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['style_agent'],                | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<bug_agent,kritik_confiЕ | |
| |                    writes=[ChannelWriteEntry(channel='bug_agent',       | |
| |                    value='bug_agent', skip_none=False, mapper=None),    | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'context_agent': PregelNode(                 | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['bug_agent'],                  | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<context_agent,kritik_cЕ | |
| |                    writes=[ChannelWriteEntry(channel='context_agent',   | |
| |                    value='context_agent', skip_none=False,              | |
| |                    mapper=None),                                        | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'summary_agent': PregelNode(                 | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['context_agent'],              | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<summary_agent,kritik_cЕ | |
| |                    writes=[ChannelWriteEntry(channel='summary_agent',   | |
| |                    value='summary_agent', skip_none=False,              | |
| |                    mapper=None),                                        | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'merge_results': PregelNode(                 | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['summary_agent'],              | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<merge_results,kritik_cЕ | |
| |                    writes=[ChannelWriteEntry(channel='merge_results',   | |
| |                    value='merge_results', skip_none=False,              | |
| |                    mapper=None),                                        | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            'format_output': PregelNode(                 | |
| |                                config={'tags': []},                     | |
| |                                channels={                               | |
| |                                    'kritik_config': 'kritik_config',    | |
| |                                    'changed_files': 'changed_files',    | |
| |                                    'file_contexts': 'file_contexts',    | |
| |                                    'agent_results': 'agent_results',    | |
| |                                    'inline_comments':                   | |
| |                    'inline_comments',                                   | |
| |                                    'summary_review': 'summary_review'   | |
| |                                },                                       | |
| |                                triggers=['merge_results'],              | |
| |                                mapper=functools.partial(<function       | |
| |                    _coerce_state at 0x0000017BA3089F80>, <class         | |
| |                    'gitkritik2.core.models.ReviewState'>),              | |
| |                                writers=[                                | |
| |                                    ChannelWrite<format_output,kritik_cЕ | |
| |                    writes=[ChannelWriteEntry(channel='format_output',   | |
| |                    value='format_output', skip_none=False,              | |
| |                    mapper=None),                                        | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                                ]                                        | |
| |                            ),                                           | |
| |                            ... +2                                       | |
| |                        },                                               | |
| |                        channels={                                       | |
| |                            'kritik_config':                             | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9CC52B0>,                                 | |
| |                            'changed_files':                             | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017B9F049950>,                                 | |
| |                            'file_contexts':                             | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9CA2210>,                                 | |
| |                            'agent_results':                             | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C3EB10>,                                 | |
| |                            'inline_comments':                           | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C3EC40>,                                 | |
| |                            'summary_review':                            | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C5B410>,                                 | |
| |                            '__start__':                                 | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9CC5550>,                       | |
| |                            'init_state':                                | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9CA1E50>,                       | |
| |                            'detect_changes':                            | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9CA2C10>,                       | |
| |                            'prepare_context':                           | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9C3F950>,                       | |
| |                            ... +9                                       | |
| |                        },                                               | |
| |                        auto_validate=False,                             | |
| |                        stream_mode='updates',                           | |
| |                        output_channels=[                                | |
| |                            'kritik_config',                             | |
| |                            'changed_files',                             | |
| |                            'file_contexts',                             | |
| |                            'agent_results',                             | |
| |                            'inline_comments',                           | |
| |                            'summary_review'                             | |
| |                        ],                                               | |
| |                        stream_channels=[                                | |
| |                            'kritik_config',                             | |
| |                            'changed_files',                             | |
| |                            'file_contexts',                             | |
| |                            'agent_results',                             | |
| |                            'inline_comments',                           | |
| |                            'summary_review'                             | |
| |                        ],                                               | |
| |                        input_channels='__start__',                      | |
| |                        builder=<langgraph.graph.state.StateGraph object | |
| |                    at 0x0000017BB9CC5010>                               | |
| |                    )                                                    | |
| |      stream_mode = 'values'                                             | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\pregel\__init__.py:720 in stream      |
|                                                                             |
|    717                     )                                                |
|    718                                                                      |
|    719                     # panic on failure or timeout                    |
| >  720                     _panic_or_proceed(done, inflight, step)          |
|    721                                                                      |
|    722                     # combine pending writes from all tasks          |
|    723                     pending_writes = deque[tuple[str, Any]]()        |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| |                 _ = ['__start__']                                       | |
| |  callback_manager = <langchain_core.callbacks.manager.CallbackManager   | |
| |                     object at 0x0000017BB9CC57F0>                       | |
| |          channels = {                                                   | |
| |                         'kritik_config':                                | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C1E360>,                                | |
| |                         'changed_files':                                | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C1E470>,                                | |
| |                         'file_contexts':                                | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D90F50>,                                | |
| |                         'agent_results':                                | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D91050>,                                | |
| |                         'inline_comments':                              | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D7F200>,                                | |
| |                         'summary_review':                               | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D7F2F0>,                                | |
| |                         '__start__':                                    | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D77CB0>,                      | |
| |                         'init_state':                                   | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9CDF110>,                      | |
| |                         'detect_changes':                               | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB3D3F1D0>,                      | |
| |                         'prepare_context':                              | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB3D3EC90>,                      | |
| |                         ... +9                                          | |
| |                     }                                                   | |
| |        checkpoint = {                                                   | |
| |                         'v': 1,                                         | |
| |                         'ts': '2025-04-06T22:11:33.031231+00:00',       | |
| |                         'channel_values': {},                           | |
| |                         'channel_versions': defaultdict(<class 'int'>,  | |
| |                     {                                                   | |
| |                             '__start__': 1,                             | |
| |                             'kritik_config': 2,                         | |
| |                             'changed_files': 2,                         | |
| |                             'file_contexts': 2,                         | |
| |                             'agent_results': 2,                         | |
| |                             'inline_comments': 2,                       | |
| |                             'summary_review': 2,                        | |
| |                             'start:init_state': 2                       | |
| |                         }),                                             | |
| |                         'versions_seen': defaultdict(<function          | |
| |                     _seen_dict at 0x0000017BA2AFF4C0>, {                | |
| |                             '__start__': defaultdict(<class 'int'>, {   | |
| |                                 '__start__': 1                          | |
| |                             }),                                         | |
| |                             'init_state': defaultdict(<class 'int'>, {  | |
| |                                 'start:init_state': 2                   | |
| |                             }),                                         | |
| |                             'detect_changes': defaultdict(<class        | |
| |                     'int'>, {}),                                        | |
| |                             'prepare_context': defaultdict(<class       | |
| |                     'int'>, {}),                                        | |
| |                             'style_agent': defaultdict(<class 'int'>,   | |
| |                     {}),                                                | |
| |                             'bug_agent': defaultdict(<class 'int'>,     | |
| |                     {}),                                                | |
| |                             'context_agent': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             'summary_agent': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             'merge_results': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             'format_output': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             ... +2                                      | |
| |                         })                                              | |
| |                     }                                                   | |
| | checkpoint_config = {                                                   | |
| |                         'tags': [],                                     | |
| |                         'metadata': {},                                 | |
| |                         'callbacks': None,                              | |
| |                         'recursion_limit': 25,                          | |
| |                         'run_id': None                                  | |
| |                     }                                                   | |
| |            config = {                                                   | |
| |                         'tags': [],                                     | |
| |                         'metadata': {},                                 | |
| |                         'callbacks': None,                              | |
| |                         'recursion_limit': 25,                          | |
| |                         'run_id': None                                  | |
| |                     }                                                   | |
| |             debug = False                                               | |
| |              done = set()                                               | |
| |          executor = <langchain_core.runnables.config.ContextThreadPoolЕ | |
| |                     object at 0x0000017BB9CC5A90>                       | |
| |           futures = [                                                   | |
| |                         <Future at 0x17bb9ca2e90 state=finished raised  | |
| |                     InvalidUpdateError>                                 | |
| |                     ]                                                   | |
| |          inflight = set()                                               | |
| |             input = {                                                   | |
| |                         'kritik_config': None,                          | |
| |                         'changed_files': [],                            | |
| |                         'file_contexts': {},                            | |
| |                         'agent_results': {},                            | |
| |                         'inline_comments': [],                          | |
| |                         'summary_review': None,                         | |
| |                         'unstaged': False,                              | |
| |                         'all_files': False,                             | |
| |                         'side_by_side': False                           | |
| |                     }                                                   | |
| |        input_keys = '__start__'                                         | |
| |      input_writes = deque([                                             | |
| |                         (                                               | |
| |                             '__start__',                                | |
| |                             {                                           | |
| |                                 'kritik_config': None,                  | |
| |                                 'changed_files': [],                    | |
| |                                 'file_contexts': {},                    | |
| |                                 'agent_results': {},                    | |
| |                                 'inline_comments': [],                  | |
| |                                 'summary_review': None,                 | |
| |                                 'unstaged': False,                      | |
| |                                 'all_files': False,                     | |
| |                                 'side_by_side': False                   | |
| |                             }                                           | |
| |                         )                                               | |
| |                     ])                                                  | |
| |   interrupt_after = []                                                  | |
| |  interrupt_before = []                                                  | |
| |   next_checkpoint = {                                                   | |
| |                         'v': 1,                                         | |
| |                         'ts': '2025-04-06T22:11:33.031231+00:00',       | |
| |                         'channel_values': {},                           | |
| |                         'channel_versions': defaultdict(<class 'int'>,  | |
| |                     {                                                   | |
| |                             '__start__': 1,                             | |
| |                             'kritik_config': 2,                         | |
| |                             'changed_files': 2,                         | |
| |                             'file_contexts': 2,                         | |
| |                             'agent_results': 2,                         | |
| |                             'inline_comments': 2,                       | |
| |                             'summary_review': 2,                        | |
| |                             'start:init_state': 2                       | |
| |                         }),                                             | |
| |                         'versions_seen': defaultdict(<function          | |
| |                     _seen_dict at 0x0000017BA2AFF4C0>, {                | |
| |                             '__start__': defaultdict(<class 'int'>, {   | |
| |                                 '__start__': 1                          | |
| |                             }),                                         | |
| |                             'init_state': defaultdict(<class 'int'>, {  | |
| |                                 'start:init_state': 2                   | |
| |                             }),                                         | |
| |                             'detect_changes': defaultdict(<class        | |
| |                     'int'>, {}),                                        | |
| |                             'prepare_context': defaultdict(<class       | |
| |                     'int'>, {}),                                        | |
| |                             'style_agent': defaultdict(<class 'int'>,   | |
| |                     {}),                                                | |
| |                             'bug_agent': defaultdict(<class 'int'>,     | |
| |                     {}),                                                | |
| |                             'context_agent': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             'summary_agent': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             'merge_results': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             'format_output': defaultdict(<class 'int'>, | |
| |                     {}),                                                | |
| |                             ... +2                                      | |
| |                         })                                              | |
| |                     }                                                   | |
| |        next_tasks = [                                                   | |
| |                         PregelExecutableTask(                           | |
| |                             name='init_state',                          | |
| |                             input=ReviewState(                          | |
| |                                 kritik_config=Settings(                 | |
| |                                     platform='github',                  | |
| |                                     model='gpt-4',                      | |
| |                                     strategy='hybrid',                  | |
| |                                     repo='org/repo',                    | |
| |                                     pr_number='42'                      | |
| |                                 ),                                      | |
| |                                 changed_files=[],                       | |
| |                                 file_contexts={},                       | |
| |                                 agent_results={},                       | |
| |                                 inline_comments=[],                     | |
| |                                 summary_review=None                     | |
| |                             ),                                          | |
| |                             proc=RunnableSequence(                      | |
| |                                 first=init_state(recurse=True),         | |
| |                                 last=ChannelWrite<init_state,kritik_coЕ | |
| |                     writes=[ChannelWriteEntry(channel='init_state',     | |
| |                     value='init_state', skip_none=False, mapper=None),  | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ),                                          | |
| |                             writes=deque(),                             | |
| |                             config={'tags': []},                        | |
| |                             triggers=['start:init_state']               | |
| |                         )                                               | |
| |                     ]                                                   | |
| |       output_keys = [                                                   | |
| |                         'kritik_config',                                | |
| |                         'changed_files',                                | |
| |                         'file_contexts',                                | |
| |                         'agent_results',                                | |
| |                         'inline_comments',                              | |
| |                         'summary_review'                                | |
| |                     ]                                                   | |
| |    pending_writes = deque([                                             | |
| |                         ('kritik_config', None),                        | |
| |                         ('changed_files', []),                          | |
| |                         ('file_contexts', {}),                          | |
| |                         ('agent_results', {}),                          | |
| |                         ('inline_comments', []),                        | |
| |                         ('summary_review', None),                       | |
| |                         ('start:init_state', '__start__')               | |
| |                     ])                                                  | |
| |         processes = {                                                   | |
| |                         '__start__': PregelNode(                        | |
| |                             config={'tags': ['langsmith:hidden']},      | |
| |                             channels=['__start__'],                     | |
| |                             triggers=['__start__'],                     | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<kritik_config,changed_filЕ | |
| |                     writes=[ChannelWriteEntry(channel='kritik_config',  | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='start:init_state',       | |
| |                     value='__start__', skip_none=False, mapper=None)]), | |
| |                                 ChannelWrite<start:init_state>(recurseЕ | |
| |                     writes=[ChannelWriteEntry(channel='start:init_statЕ | |
| |                     value='__start__', skip_none=False, mapper=None)])  | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'init_state': PregelNode(                       | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['start:init_state'],              | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<init_state,kritik_config,Е | |
| |                     writes=[ChannelWriteEntry(channel='init_state',     | |
| |                     value='init_state', skip_none=False, mapper=None),  | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'detect_changes': PregelNode(                   | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['init_state'],                    | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<detect_changes,kritik_conЕ | |
| |                     writes=[ChannelWriteEntry(channel='detect_changes', | |
| |                     value='detect_changes', skip_none=False,            | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'prepare_context': PregelNode(                  | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['detect_changes'],                | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<prepare_context,kritik_coЕ | |
| |                     writes=[ChannelWriteEntry(channel='prepare_contextЕ | |
| |                     value='prepare_context', skip_none=False,           | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'style_agent': PregelNode(                      | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['prepare_context'],               | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<style_agent,kritik_configЕ | |
| |                     writes=[ChannelWriteEntry(channel='style_agent',    | |
| |                     value='style_agent', skip_none=False, mapper=None), | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'bug_agent': PregelNode(                        | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['style_agent'],                   | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<bug_agent,kritik_config,cЕ | |
| |                     writes=[ChannelWriteEntry(channel='bug_agent',      | |
| |                     value='bug_agent', skip_none=False, mapper=None),   | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'context_agent': PregelNode(                    | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['bug_agent'],                     | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<context_agent,kritik_confЕ | |
| |                     writes=[ChannelWriteEntry(channel='context_agent',  | |
| |                     value='context_agent', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'summary_agent': PregelNode(                    | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['context_agent'],                 | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<summary_agent,kritik_confЕ | |
| |                     writes=[ChannelWriteEntry(channel='summary_agent',  | |
| |                     value='summary_agent', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'merge_results': PregelNode(                    | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['summary_agent'],                 | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<merge_results,kritik_confЕ | |
| |                     writes=[ChannelWriteEntry(channel='merge_results',  | |
| |                     value='merge_results', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         'format_output': PregelNode(                    | |
| |                             config={'tags': []},                        | |
| |                             channels={                                  | |
| |                                 'kritik_config': 'kritik_config',       | |
| |                                 'changed_files': 'changed_files',       | |
| |                                 'file_contexts': 'file_contexts',       | |
| |                                 'agent_results': 'agent_results',       | |
| |                                 'inline_comments': 'inline_comments',   | |
| |                                 'summary_review': 'summary_review'      | |
| |                             },                                          | |
| |                             triggers=['merge_results'],                 | |
| |                             mapper=functools.partial(<function          | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                             writers=[                                   | |
| |                                 ChannelWrite<format_output,kritik_confЕ | |
| |                     writes=[ChannelWriteEntry(channel='format_output',  | |
| |                     value='format_output', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ]                                           | |
| |                         ),                                              | |
| |                         ... +2                                          | |
| |                     }                                                   | |
| |       run_manager = <langchain_core.callbacks.manager.CallbackManagerFЕ | |
| |                     object at 0x0000017BB9CC5940>                       | |
| |              self = CompiledStateGraph(                                 | |
| |                         nodes={                                         | |
| |                             '__start__': PregelNode(                    | |
| |                                 config={'tags': ['langsmith:hidden']},  | |
| |                                 channels=['__start__'],                 | |
| |                                 triggers=['__start__'],                 | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<kritik_config,changedЕ | |
| |                     writes=[ChannelWriteEntry(channel='kritik_config',  | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='start:init_state',       | |
| |                     value='__start__', skip_none=False, mapper=None)]), | |
| |                                     ChannelWrite<start:init_state>(recЕ | |
| |                     writes=[ChannelWriteEntry(channel='start:init_statЕ | |
| |                     value='__start__', skip_none=False, mapper=None)])  | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'init_state': PregelNode(                   | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['start:init_state'],          | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<init_state,kritik_conЕ | |
| |                     writes=[ChannelWriteEntry(channel='init_state',     | |
| |                     value='init_state', skip_none=False, mapper=None),  | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'detect_changes': PregelNode(               | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['init_state'],                | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<detect_changes,kritikЕ | |
| |                     writes=[ChannelWriteEntry(channel='detect_changes', | |
| |                     value='detect_changes', skip_none=False,            | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'prepare_context': PregelNode(              | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['detect_changes'],            | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<prepare_context,kritiЕ | |
| |                     writes=[ChannelWriteEntry(channel='prepare_contextЕ | |
| |                     value='prepare_context', skip_none=False,           | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'style_agent': PregelNode(                  | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['prepare_context'],           | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<style_agent,kritik_coЕ | |
| |                     writes=[ChannelWriteEntry(channel='style_agent',    | |
| |                     value='style_agent', skip_none=False, mapper=None), | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'bug_agent': PregelNode(                    | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['style_agent'],               | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<bug_agent,kritik_confЕ | |
| |                     writes=[ChannelWriteEntry(channel='bug_agent',      | |
| |                     value='bug_agent', skip_none=False, mapper=None),   | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'context_agent': PregelNode(                | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['bug_agent'],                 | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<context_agent,kritik_Е | |
| |                     writes=[ChannelWriteEntry(channel='context_agent',  | |
| |                     value='context_agent', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'summary_agent': PregelNode(                | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['context_agent'],             | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<summary_agent,kritik_Е | |
| |                     writes=[ChannelWriteEntry(channel='summary_agent',  | |
| |                     value='summary_agent', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'merge_results': PregelNode(                | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['summary_agent'],             | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<merge_results,kritik_Е | |
| |                     writes=[ChannelWriteEntry(channel='merge_results',  | |
| |                     value='merge_results', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             'format_output': PregelNode(                | |
| |                                 config={'tags': []},                    | |
| |                                 channels={                              | |
| |                                     'kritik_config': 'kritik_config',   | |
| |                                     'changed_files': 'changed_files',   | |
| |                                     'file_contexts': 'file_contexts',   | |
| |                                     'agent_results': 'agent_results',   | |
| |                                     'inline_comments':                  | |
| |                     'inline_comments',                                  | |
| |                                     'summary_review': 'summary_review'  | |
| |                                 },                                      | |
| |                                 triggers=['merge_results'],             | |
| |                                 mapper=functools.partial(<function      | |
| |                     _coerce_state at 0x0000017BA3089F80>, <class        | |
| |                     'gitkritik2.core.models.ReviewState'>),             | |
| |                                 writers=[                               | |
| |                                     ChannelWrite<format_output,kritik_Е | |
| |                     writes=[ChannelWriteEntry(channel='format_output',  | |
| |                     value='format_output', skip_none=False,             | |
| |                     mapper=None),                                       | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                                 ]                                       | |
| |                             ),                                          | |
| |                             ... +2                                      | |
| |                         },                                              | |
| |                         channels={                                      | |
| |                             'kritik_config':                            | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9CC52B0>,                                | |
| |                             'changed_files':                            | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017B9F049950>,                                | |
| |                             'file_contexts':                            | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9CA2210>,                                | |
| |                             'agent_results':                            | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C3EB10>,                                | |
| |                             'inline_comments':                          | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C3EC40>,                                | |
| |                             'summary_review':                           | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C5B410>,                                | |
| |                             '__start__':                                | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9CC5550>,                      | |
| |                             'init_state':                               | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9CA1E50>,                      | |
| |                             'detect_changes':                           | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9CA2C10>,                      | |
| |                             'prepare_context':                          | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9C3F950>,                      | |
| |                             ... +9                                      | |
| |                         },                                              | |
| |                         auto_validate=False,                            | |
| |                         stream_mode='updates',                          | |
| |                         output_channels=[                               | |
| |                             'kritik_config',                            | |
| |                             'changed_files',                            | |
| |                             'file_contexts',                            | |
| |                             'agent_results',                            | |
| |                             'inline_comments',                          | |
| |                             'summary_review'                            | |
| |                         ],                                              | |
| |                         stream_channels=[                               | |
| |                             'kritik_config',                            | |
| |                             'changed_files',                            | |
| |                             'file_contexts',                            | |
| |                             'agent_results',                            | |
| |                             'inline_comments',                          | |
| |                             'summary_review'                            | |
| |                         ],                                              | |
| |                         input_channels='__start__',                     | |
| |                         builder=<langgraph.graph.state.StateGraph       | |
| |                     object at 0x0000017BB9CC5010>                       | |
| |                     )                                                   | |
| |              step = 1                                                   | |
| |       stream_mode = 'values'                                            | |
| |              task = <Future at 0x17bb9ca2e90 state=finished raised      | |
| |                     InvalidUpdateError>                                 | |
| |    tasks_w_config = [                                                   | |
| |                         (                                               | |
| |                             RunnableSequence(                           | |
| |                                 first=init_state(recurse=True),         | |
| |                                 last=ChannelWrite<init_state,kritik_coЕ | |
| |                     writes=[ChannelWriteEntry(channel='init_state',     | |
| |                     value='init_state', skip_none=False, mapper=None),  | |
| |                     ChannelWriteEntry(channel='kritik_config',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='changed_files',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='file_contexts',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='agent_results',          | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='inline_comments',        | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False)),              | |
| |                     ChannelWriteEntry(channel='summary_review',         | |
| |                     value=<object object at 0x0000017B9EE12830>,        | |
| |                     skip_none=False,                                    | |
| |                     mapper=_get_state_key(recurse=False))])             | |
| |                             ),                                          | |
| |                             ReviewState(                                | |
| |                                 kritik_config=Settings(                 | |
| |                                     platform='github',                  | |
| |                                     model='gpt-4',                      | |
| |                                     strategy='hybrid',                  | |
| |                                     repo='org/repo',                    | |
| |                                     pr_number='42'                      | |
| |                                 ),                                      | |
| |                                 changed_files=[],                       | |
| |                                 file_contexts={},                       | |
| |                                 agent_results={},                       | |
| |                                 inline_comments=[],                     | |
| |                                 summary_review=None                     | |
| |                             ),                                          | |
| |                             {                                           | |
| |                                 'tags': [],                             | |
| |                                 'metadata': {},                         | |
| |                                 'callbacks':                            | |
| |                     <langchain_core.callbacks.manager.CallbackManager   | |
| |                     object at 0x0000017BB9C1E580>,                      | |
| |                                 'recursion_limit': 25,                  | |
| |                                 'run_name': 'init_state',               | |
| |                                 'configurable': {                       | |
| |                                     '__pregel_send': <built-in method   | |
| |                     extend of collections.deque object at               | |
| |                     0x0000017BB9D7FA60>,                                | |
| |                                     '__pregel_read':                    | |
| |                     functools.partial(<function _local_read at          | |
| |                     0x0000017BA3066C00>, {'v': 1, 'ts':                 | |
| |                     '2025-04-06T22:11:33.031231+00:00',                 | |
| |                     'channel_values': {}, 'channel_versions':           | |
| |                     defaultdict(<class 'int'>, {'__start__': 1,         | |
| |                     'kritik_config': 2, 'changed_files': 2,             | |
| |                     'file_contexts': 2, 'agent_results': 2,             | |
| |                     'inline_comments': 2, 'summary_review': 2,          | |
| |                     'start:init_state': 2}), 'versions_seen':           | |
| |                     defaultdict(<function _seen_dict at                 | |
| |                     0x0000017BA2AFF4C0>, {'__start__':                  | |
| |                     defaultdict(<class 'int'>, {'__start__': 1}),       | |
| |                     'init_state': defaultdict(<class 'int'>,            | |
| |                     {'start:init_state': 2}), 'detect_changes':         | |
| |                     defaultdict(<class 'int'>, {}), 'prepare_context':  | |
| |                     defaultdict(<class 'int'>, {}), 'style_agent':      | |
| |                     defaultdict(<class 'int'>, {}), 'bug_agent':        | |
| |                     defaultdict(<class 'int'>, {}), 'context_agent':    | |
| |                     defaultdict(<class 'int'>, {}), 'summary_agent':    | |
| |                     defaultdict(<class 'int'>, {}), 'merge_results':    | |
| |                     defaultdict(<class 'int'>, {}), 'format_output':    | |
| |                     defaultdict(<class 'int'>, {}), 'post_inline':      | |
| |                     defaultdict(<class 'int'>, {}), 'post_summary':     | |
| |                     defaultdict(<class 'int'>, {})})},                  | |
| |                     {'kritik_config':                                   | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C1E360>, 'changed_files':               | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9C1E470>, 'file_contexts':               | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D90F50>, 'agent_results':               | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D91050>, 'inline_comments':             | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D7F200>, 'summary_review':              | |
| |                     <langgraph.channels.last_value.LastValue object at  | |
| |                     0x0000017BB9D7F2F0>, '__start__':                   | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D77CB0>, 'init_state':        | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9CDF110>, 'detect_changes':    | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB3D3F1D0>, 'prepare_context':   | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB3D3EC90>, 'style_agent':       | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D1DA70>, 'bug_agent':         | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D1DB20>, 'context_agent':     | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D48EB0>, 'summary_agent':     | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D63610>, 'merge_results':     | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D507A0>, 'format_output':     | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D67850>, 'post_inline':       | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D66850>, 'post_summary':      | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D27930>, 'start:init_state':  | |
| |                     <langgraph.channels.ephemeral_value.EphemeralValue  | |
| |                     object at 0x0000017BB9D279A0>}, deque([]))          | |
| |                                 }                                       | |
| |                             }                                           | |
| |                         )                                               | |
| |                     ]                                                   | |
| |            writes = deque([                                             | |
| |                         ('kritik_config', None),                        | |
| |                         ('changed_files', []),                          | |
| |                         ('file_contexts', {}),                          | |
| |                         ('agent_results', {}),                          | |
| |                         ('inline_comments', []),                        | |
| |                         ('summary_review', None),                       | |
| |                         ('start:init_state', '__start__')               | |
| |                     ])                                                  | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\pregel\__init__.py:1193 in            |
| _panic_or_proceed                                                           |
|                                                                             |
|   1190             while inflight:                                          |
|   1191                 inflight.pop().cancel()                              |
|   1192             # raise the exception                                    |
| > 1193             raise exc                                                |
|   1194             # TODO this is where retry of an entire step would happe |
|   1195                                                                      |
|   1196     if inflight:                                                     |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| |     done = set()                                                        | |
| |      exc = InvalidUpdateError("Expected dict, got                       | |
| |            kritik_config=Settings(platform='github', model='gpt-4',     | |
| |            strategy='hybrid', repo='org/repo', pr_number='42')          | |
| |            changed_files=[] file_contexts={} agent_results={}           | |
| |            inline_comments=[] summary_review=None")                     | |
| | inflight = set()                                                        | |
| |     step = 1                                                            | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Program Files\Python313\Lib\concurrent\futures\thread.py:59 in run       |
|                                                                             |
|    56             return                                                    |
|    57                                                                       |
|    58         try:                                                          |
| >  59             result = self.fn(*self.args, **self.kwargs)               |
|    60         except BaseException as exc:                                  |
|    61             self.future.set_exception(exc)                            |
|    62             # Break a reference cycle with the exception 'exc'        |
|                                                                             |
| +-- locals ---+                                                             |
| | self = None |                                                             |
| +-------------+                                                             |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langchain_core\runnables\base.py:2499 in invoke |
|                                                                             |
|   2496         # invoke all steps in sequence                               |
|   2497         try:                                                         |
|   2498             for i, step in enumerate(self.steps):                    |
| > 2499                 input = step.invoke(                                 |
|   2500                     input,                                           |
|   2501                     # mark each step as a child run                  |
|   2502                     patch_config(                                    |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| | callback_manager = <langchain_core.callbacks.manager.CallbackManager    | |
| |                    object at 0x0000017BB9D91A50>                        | |
| |           config = {                                                    | |
| |                        'tags': [],                                      | |
| |                        'metadata': {},                                  | |
| |                        'callbacks':                                     | |
| |                    <langchain_core.callbacks.manager.CallbackManager    | |
| |                    object at 0x0000017BB9C1E580>,                       | |
| |                        'recursion_limit': 25,                           | |
| |                        'run_name': 'init_state',                        | |
| |                        'configurable': {                                | |
| |                            '__pregel_send': <built-in method extend of  | |
| |                    collections.deque object at 0x0000017BB9D7FA60>,     | |
| |                            '__pregel_read': functools.partial(<function | |
| |                    _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':   | |
| |                    '2025-04-06T22:11:33.031231+00:00',                  | |
| |                    'channel_values': {}, 'channel_versions':            | |
| |                    defaultdict(<class 'int'>, {'__start__': 1,          | |
| |                    'kritik_config': 2, 'changed_files': 2,              | |
| |                    'file_contexts': 2, 'agent_results': 2,              | |
| |                    'inline_comments': 2, 'summary_review': 2,           | |
| |                    'start:init_state': 2}), 'versions_seen':            | |
| |                    defaultdict(<function _seen_dict at                  | |
| |                    0x0000017BA2AFF4C0>, {'__start__':                   | |
| |                    defaultdict(<class 'int'>, {'__start__': 1}),        | |
| |                    'init_state': defaultdict(<class 'int'>,             | |
| |                    {'start:init_state': 2}), 'detect_changes':          | |
| |                    defaultdict(<class 'int'>, {}), 'prepare_context':   | |
| |                    defaultdict(<class 'int'>, {}), 'style_agent':       | |
| |                    defaultdict(<class 'int'>, {}), 'bug_agent':         | |
| |                    defaultdict(<class 'int'>, {}), 'context_agent':     | |
| |                    defaultdict(<class 'int'>, {}), 'summary_agent':     | |
| |                    defaultdict(<class 'int'>, {}), 'merge_results':     | |
| |                    defaultdict(<class 'int'>, {}), 'format_output':     | |
| |                    defaultdict(<class 'int'>, {}), 'post_inline':       | |
| |                    defaultdict(<class 'int'>, {}), 'post_summary':      | |
| |                    defaultdict(<class 'int'>, {})})}, {'kritik_config': | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C1E360>, 'changed_files':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C1E470>, 'file_contexts':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D90F50>, 'agent_results':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D91050>, 'inline_comments':              | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D7F200>, 'summary_review':               | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D7F2F0>, '__start__':                    | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D77CB0>, 'init_state':         | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9CDF110>, 'detect_changes':     | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB3D3F1D0>, 'prepare_context':    | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB3D3EC90>, 'style_agent':        | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D1DA70>, 'bug_agent':          | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D1DB20>, 'context_agent':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D48EB0>, 'summary_agent':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D63610>, 'merge_results':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D507A0>, 'format_output':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D67850>, 'post_inline':        | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D66850>, 'post_summary':       | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D27930>, 'start:init_state':   | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D279A0>}, deque([]))           | |
| |                        }                                                | |
| |                    }                                                    | |
| |                i = 1                                                    | |
| |            input = ReviewState(                                         | |
| |                        kritik_config=Settings(                          | |
| |                            platform='github',                           | |
| |                            model='gpt-4',                               | |
| |                            strategy='hybrid',                           | |
| |                            repo='org/repo',                             | |
| |                            pr_number='42'                               | |
| |                        ),                                               | |
| |                        changed_files=[],                                | |
| |                        file_contexts={},                                | |
| |                        agent_results={},                                | |
| |                        inline_comments=[],                              | |
| |                        summary_review=None                              | |
| |                    )                                                    | |
| |      run_manager = <langchain_core.callbacks.manager.CallbackManagerFoЕ | |
| |                    object at 0x0000017BB9CA34D0>                        | |
| |             self = RunnableSequence(                                    | |
| |                        first=init_state(recurse=True),                  | |
| |                        last=ChannelWrite<init_state,kritik_config,chanЕ | |
| |                    writes=[ChannelWriteEntry(channel='init_state',      | |
| |                    value='init_state', skip_none=False, mapper=None),   | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| |                    )                                                    | |
| |             step = ChannelWrite<init_state,kritik_config,changed_filesЕ | |
| |                    writes=[ChannelWriteEntry(channel='init_state',      | |
| |                    value='init_state', skip_none=False, mapper=None),   | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\utils.py:76 in invoke                 |
|                                                                             |
|    73                                                                       |
|    74     def invoke(self, input: Any, config: Optional[RunnableConfig] = N |
|    75         if self.trace:                                                |
| >  76             ret = self._call_with_config(                             |
|    77                 self.func, input, merge_configs(self.config, config), |
|    78             )                                                         |
|    79         else:                                                         |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| | config = {                                                              | |
| |              'tags': [],                                                | |
| |              'metadata': {},                                            | |
| |              'callbacks':                                               | |
| |          <langchain_core.callbacks.manager.CallbackManager object at    | |
| |          0x0000017BB14C4C80>,                                           | |
| |              'recursion_limit': 25,                                     | |
| |              'configurable': {                                          | |
| |                  '__pregel_send': <built-in method extend of            | |
| |          collections.deque object at 0x0000017BB9D7FA60>,               | |
| |                  '__pregel_read': functools.partial(<function           | |
| |          _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':             | |
| |          '2025-04-06T22:11:33.031231+00:00', 'channel_values': {},      | |
| |          'channel_versions': defaultdict(<class 'int'>, {'__start__':   | |
| |          1, 'kritik_config': 2, 'changed_files': 2, 'file_contexts': 2, | |
| |          'agent_results': 2, 'inline_comments': 2, 'summary_review': 2, | |
| |          'start:init_state': 2}), 'versions_seen':                      | |
| |          defaultdict(<function _seen_dict at 0x0000017BA2AFF4C0>,       | |
| |          {'__start__': defaultdict(<class 'int'>, {'__start__': 1}),    | |
| |          'init_state': defaultdict(<class 'int'>, {'start:init_state':  | |
| |          2}), 'detect_changes': defaultdict(<class 'int'>, {}),         | |
| |          'prepare_context': defaultdict(<class 'int'>, {}),             | |
| |          'style_agent': defaultdict(<class 'int'>, {}), 'bug_agent':    | |
| |          defaultdict(<class 'int'>, {}), 'context_agent':               | |
| |          defaultdict(<class 'int'>, {}), 'summary_agent':               | |
| |          defaultdict(<class 'int'>, {}), 'merge_results':               | |
| |          defaultdict(<class 'int'>, {}), 'format_output':               | |
| |          defaultdict(<class 'int'>, {}), 'post_inline':                 | |
| |          defaultdict(<class 'int'>, {}), 'post_summary':                | |
| |          defaultdict(<class 'int'>, {})})}, {'kritik_config':           | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9C1E360>, 'changed_files':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9C1E470>, 'file_contexts':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D90F50>, 'agent_results':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D91050>, 'inline_comments':                        | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D7F200>, 'summary_review':                         | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D7F2F0>, '__start__':                              | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D77CB0>, 'init_state':                             | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9CDF110>, 'detect_changes':                         | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB3D3F1D0>, 'prepare_context':                        | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB3D3EC90>, 'style_agent':                            | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D1DA70>, 'bug_agent':                              | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D1DB20>, 'context_agent':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D48EB0>, 'summary_agent':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D63610>, 'merge_results':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D507A0>, 'format_output':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D67850>, 'post_inline':                            | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D66850>, 'post_summary':                           | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D27930>, 'start:init_state':                       | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D279A0>}, deque([]))                               | |
| |              }                                                          | |
| |          }                                                              | |
| |  input = ReviewState(                                                   | |
| |              kritik_config=Settings(                                    | |
| |                  platform='github',                                     | |
| |                  model='gpt-4',                                         | |
| |                  strategy='hybrid',                                     | |
| |                  repo='org/repo',                                       | |
| |                  pr_number='42'                                         | |
| |              ),                                                         | |
| |              changed_files=[],                                          | |
| |              file_contexts={},                                          | |
| |              agent_results={},                                          | |
| |              inline_comments=[],                                        | |
| |              summary_review=None                                        | |
| |          )                                                              | |
| |   self = ChannelWrite<init_state,kritik_config,changed_files,file_contЕ | |
| |          writes=[ChannelWriteEntry(channel='init_state',                | |
| |          value='init_state', skip_none=False, mapper=None),             | |
| |          ChannelWriteEntry(channel='kritik_config', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='changed_files', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='file_contexts', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='agent_results', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='inline_comments', value=<object     | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='summary_review', value=<object      | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False))])                        | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langchain_core\runnables\base.py:1626 in        |
| _call_with_config                                                           |
|                                                                             |
|   1623             context.run(var_child_runnable_config.set, child_config) |
|   1624             output = cast(                                           |
|   1625                 Output,                                              |
| > 1626                 context.run(                                         |
|   1627                     call_func_with_variable_args,  # type: ignore[ar |
|   1628                     func,  # type: ignore[arg-type]                  |
|   1629                     input,  # type: ignore[arg-type]                 |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| | callback_manager = <langchain_core.callbacks.manager.CallbackManager    | |
| |                    object at 0x0000017BB9DA17F0>                        | |
| |     child_config = {                                                    | |
| |                        'tags': ['langsmith:hidden'],                    | |
| |                        'metadata': {},                                  | |
| |                        'callbacks':                                     | |
| |                    <langchain_core.callbacks.manager.CallbackManager    | |
| |                    object at 0x0000017BB9DA26D0>,                       | |
| |                        'recursion_limit': 25,                           | |
| |                        'configurable': {                                | |
| |                            '__pregel_send': <built-in method extend of  | |
| |                    collections.deque object at 0x0000017BB9D7FA60>,     | |
| |                            '__pregel_read': functools.partial(<function | |
| |                    _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':   | |
| |                    '2025-04-06T22:11:33.031231+00:00',                  | |
| |                    'channel_values': {}, 'channel_versions':            | |
| |                    defaultdict(<class 'int'>, {'__start__': 1,          | |
| |                    'kritik_config': 2, 'changed_files': 2,              | |
| |                    'file_contexts': 2, 'agent_results': 2,              | |
| |                    'inline_comments': 2, 'summary_review': 2,           | |
| |                    'start:init_state': 2}), 'versions_seen':            | |
| |                    defaultdict(<function _seen_dict at                  | |
| |                    0x0000017BA2AFF4C0>, {'__start__':                   | |
| |                    defaultdict(<class 'int'>, {'__start__': 1}),        | |
| |                    'init_state': defaultdict(<class 'int'>,             | |
| |                    {'start:init_state': 2}), 'detect_changes':          | |
| |                    defaultdict(<class 'int'>, {}), 'prepare_context':   | |
| |                    defaultdict(<class 'int'>, {}), 'style_agent':       | |
| |                    defaultdict(<class 'int'>, {}), 'bug_agent':         | |
| |                    defaultdict(<class 'int'>, {}), 'context_agent':     | |
| |                    defaultdict(<class 'int'>, {}), 'summary_agent':     | |
| |                    defaultdict(<class 'int'>, {}), 'merge_results':     | |
| |                    defaultdict(<class 'int'>, {}), 'format_output':     | |
| |                    defaultdict(<class 'int'>, {}), 'post_inline':       | |
| |                    defaultdict(<class 'int'>, {}), 'post_summary':      | |
| |                    defaultdict(<class 'int'>, {})})}, {'kritik_config': | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C1E360>, 'changed_files':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C1E470>, 'file_contexts':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D90F50>, 'agent_results':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D91050>, 'inline_comments':              | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D7F200>, 'summary_review':               | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D7F2F0>, '__start__':                    | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D77CB0>, 'init_state':         | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9CDF110>, 'detect_changes':     | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB3D3F1D0>, 'prepare_context':    | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB3D3EC90>, 'style_agent':        | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D1DA70>, 'bug_agent':          | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D1DB20>, 'context_agent':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D48EB0>, 'summary_agent':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D63610>, 'merge_results':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D507A0>, 'format_output':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D67850>, 'post_inline':        | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D66850>, 'post_summary':       | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D27930>, 'start:init_state':   | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D279A0>}, deque([]))           | |
| |                        }                                                | |
| |                    }                                                    | |
| |           config = {                                                    | |
| |                        'tags': ['langsmith:hidden'],                    | |
| |                        'metadata': {},                                  | |
| |                        'callbacks':                                     | |
| |                    <langchain_core.callbacks.manager.CallbackManager    | |
| |                    object at 0x0000017BB14C4C80>,                       | |
| |                        'recursion_limit': 25,                           | |
| |                        'configurable': {                                | |
| |                            '__pregel_send': <built-in method extend of  | |
| |                    collections.deque object at 0x0000017BB9D7FA60>,     | |
| |                            '__pregel_read': functools.partial(<function | |
| |                    _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':   | |
| |                    '2025-04-06T22:11:33.031231+00:00',                  | |
| |                    'channel_values': {}, 'channel_versions':            | |
| |                    defaultdict(<class 'int'>, {'__start__': 1,          | |
| |                    'kritik_config': 2, 'changed_files': 2,              | |
| |                    'file_contexts': 2, 'agent_results': 2,              | |
| |                    'inline_comments': 2, 'summary_review': 2,           | |
| |                    'start:init_state': 2}), 'versions_seen':            | |
| |                    defaultdict(<function _seen_dict at                  | |
| |                    0x0000017BA2AFF4C0>, {'__start__':                   | |
| |                    defaultdict(<class 'int'>, {'__start__': 1}),        | |
| |                    'init_state': defaultdict(<class 'int'>,             | |
| |                    {'start:init_state': 2}), 'detect_changes':          | |
| |                    defaultdict(<class 'int'>, {}), 'prepare_context':   | |
| |                    defaultdict(<class 'int'>, {}), 'style_agent':       | |
| |                    defaultdict(<class 'int'>, {}), 'bug_agent':         | |
| |                    defaultdict(<class 'int'>, {}), 'context_agent':     | |
| |                    defaultdict(<class 'int'>, {}), 'summary_agent':     | |
| |                    defaultdict(<class 'int'>, {}), 'merge_results':     | |
| |                    defaultdict(<class 'int'>, {}), 'format_output':     | |
| |                    defaultdict(<class 'int'>, {}), 'post_inline':       | |
| |                    defaultdict(<class 'int'>, {}), 'post_summary':      | |
| |                    defaultdict(<class 'int'>, {})})}, {'kritik_config': | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C1E360>, 'changed_files':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9C1E470>, 'file_contexts':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D90F50>, 'agent_results':                | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D91050>, 'inline_comments':              | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D7F200>, 'summary_review':               | |
| |                    <langgraph.channels.last_value.LastValue object at   | |
| |                    0x0000017BB9D7F2F0>, '__start__':                    | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D77CB0>, 'init_state':         | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9CDF110>, 'detect_changes':     | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB3D3F1D0>, 'prepare_context':    | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB3D3EC90>, 'style_agent':        | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D1DA70>, 'bug_agent':          | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D1DB20>, 'context_agent':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D48EB0>, 'summary_agent':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D63610>, 'merge_results':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D507A0>, 'format_output':      | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D67850>, 'post_inline':        | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D66850>, 'post_summary':       | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D27930>, 'start:init_state':   | |
| |                    <langgraph.channels.ephemeral_value.EphemeralValue   | |
| |                    object at 0x0000017BB9D279A0>}, deque([]))           | |
| |                        }                                                | |
| |                    }                                                    | |
| |          context = <_contextvars.Context object at 0x0000017BB9DA7D40>  | |
| |             func = <bound method ChannelWrite._write of                 | |
| |                    ChannelWrite<init_state,kritik_config,changed_filesЕ | |
| |                    writes=[ChannelWriteEntry(channel='init_state',      | |
| |                    value='init_state', skip_none=False, mapper=None),   | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])>             | |
| |            input = ReviewState(                                         | |
| |                        kritik_config=Settings(                          | |
| |                            platform='github',                           | |
| |                            model='gpt-4',                               | |
| |                            strategy='hybrid',                           | |
| |                            repo='org/repo',                             | |
| |                            pr_number='42'                               | |
| |                        ),                                               | |
| |                        changed_files=[],                                | |
| |                        file_contexts={},                                | |
| |                        agent_results={},                                | |
| |                        inline_comments=[],                              | |
| |                        summary_review=None                              | |
| |                    )                                                    | |
| |           kwargs = {}                                                   | |
| |      run_manager = <langchain_core.callbacks.manager.CallbackManagerFoЕ | |
| |                    object at 0x0000017BB9C3F490>                        | |
| |         run_type = None                                                 | |
| |             self = ChannelWrite<init_state,kritik_config,changed_filesЕ | |
| |                    writes=[ChannelWriteEntry(channel='init_state',      | |
| |                    value='init_state', skip_none=False, mapper=None),   | |
| |                    ChannelWriteEntry(channel='kritik_config',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='changed_files',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='file_contexts',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='agent_results',           | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='inline_comments',         | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False)),               | |
| |                    ChannelWriteEntry(channel='summary_review',          | |
| |                    value=<object object at 0x0000017B9EE12830>,         | |
| |                    skip_none=False,                                     | |
| |                    mapper=_get_state_key(recurse=False))])              | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langchain_core\runnables\config.py:347 in       |
| call_func_with_variable_args                                                |
|                                                                             |
|   344             kwargs["config"] = config                                 |
|   345     if run_manager is not None and accepts_run_manager(func):         |
|   346         kwargs["run_manager"] = run_manager                           |
| > 347     return func(input, **kwargs)  # type: ignore[call-arg]            |
|   348                                                                       |
|   349                                                                       |
|   350 def acall_func_with_variable_args(                                    |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| |      config = {                                                         | |
| |                   'tags': ['langsmith:hidden'],                         | |
| |                   'metadata': {},                                       | |
| |                   'callbacks':                                          | |
| |               <langchain_core.callbacks.manager.CallbackManager object  | |
| |               at 0x0000017BB14C4C80>,                                   | |
| |                   'recursion_limit': 25,                                | |
| |                   'configurable': {                                     | |
| |                       '__pregel_send': <built-in method extend of       | |
| |               collections.deque object at 0x0000017BB9D7FA60>,          | |
| |                       '__pregel_read': functools.partial(<function      | |
| |               _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':        | |
| |               '2025-04-06T22:11:33.031231+00:00', 'channel_values': {}, | |
| |               'channel_versions': defaultdict(<class 'int'>,            | |
| |               {'__start__': 1, 'kritik_config': 2, 'changed_files': 2,  | |
| |               'file_contexts': 2, 'agent_results': 2,                   | |
| |               'inline_comments': 2, 'summary_review': 2,                | |
| |               'start:init_state': 2}), 'versions_seen':                 | |
| |               defaultdict(<function _seen_dict at 0x0000017BA2AFF4C0>,  | |
| |               {'__start__': defaultdict(<class 'int'>, {'__start__':    | |
| |               1}), 'init_state': defaultdict(<class 'int'>,             | |
| |               {'start:init_state': 2}), 'detect_changes':               | |
| |               defaultdict(<class 'int'>, {}), 'prepare_context':        | |
| |               defaultdict(<class 'int'>, {}), 'style_agent':            | |
| |               defaultdict(<class 'int'>, {}), 'bug_agent':              | |
| |               defaultdict(<class 'int'>, {}), 'context_agent':          | |
| |               defaultdict(<class 'int'>, {}), 'summary_agent':          | |
| |               defaultdict(<class 'int'>, {}), 'merge_results':          | |
| |               defaultdict(<class 'int'>, {}), 'format_output':          | |
| |               defaultdict(<class 'int'>, {}), 'post_inline':            | |
| |               defaultdict(<class 'int'>, {}), 'post_summary':           | |
| |               defaultdict(<class 'int'>, {})})}, {'kritik_config':      | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9C1E360>, 'changed_files':                     | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9C1E470>, 'file_contexts':                     | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D90F50>, 'agent_results':                     | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D91050>, 'inline_comments':                   | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D7F200>, 'summary_review':                    | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D7F2F0>, '__start__':                         | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D77CB0>, 'init_state':                     | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9CDF110>, 'detect_changes':                 | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB3D3F1D0>, 'prepare_context':                | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB3D3EC90>, 'style_agent':                    | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D1DA70>, 'bug_agent':                      | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D1DB20>, 'context_agent':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D48EB0>, 'summary_agent':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D63610>, 'merge_results':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D507A0>, 'format_output':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D67850>, 'post_inline':                    | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D66850>, 'post_summary':                   | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D27930>, 'start:init_state':               | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D279A0>}, deque([]))                       | |
| |                   }                                                     | |
| |               }                                                         | |
| |        func = <bound method ChannelWrite._write of                      | |
| |               ChannelWrite<init_state,kritik_config,changed_files,fileЕ | |
| |               writes=[ChannelWriteEntry(channel='init_state',           | |
| |               value='init_state', skip_none=False, mapper=None),        | |
| |               ChannelWriteEntry(channel='kritik_config', value=<object  | |
| |               object at 0x0000017B9EE12830>, skip_none=False,           | |
| |               mapper=_get_state_key(recurse=False)),                    | |
| |               ChannelWriteEntry(channel='changed_files', value=<object  | |
| |               object at 0x0000017B9EE12830>, skip_none=False,           | |
| |               mapper=_get_state_key(recurse=False)),                    | |
| |               ChannelWriteEntry(channel='file_contexts', value=<object  | |
| |               object at 0x0000017B9EE12830>, skip_none=False,           | |
| |               mapper=_get_state_key(recurse=False)),                    | |
| |               ChannelWriteEntry(channel='agent_results', value=<object  | |
| |               object at 0x0000017B9EE12830>, skip_none=False,           | |
| |               mapper=_get_state_key(recurse=False)),                    | |
| |               ChannelWriteEntry(channel='inline_comments',              | |
| |               value=<object object at 0x0000017B9EE12830>,              | |
| |               skip_none=False, mapper=_get_state_key(recurse=False)),   | |
| |               ChannelWriteEntry(channel='summary_review', value=<object | |
| |               object at 0x0000017B9EE12830>, skip_none=False,           | |
| |               mapper=_get_state_key(recurse=False))])>                  | |
| |       input = ReviewState(                                              | |
| |                   kritik_config=Settings(                               | |
| |                       platform='github',                                | |
| |                       model='gpt-4',                                    | |
| |                       strategy='hybrid',                                | |
| |                       repo='org/repo',                                  | |
| |                       pr_number='42'                                    | |
| |                   ),                                                    | |
| |                   changed_files=[],                                     | |
| |                   file_contexts={},                                     | |
| |                   agent_results={},                                     | |
| |                   inline_comments=[],                                   | |
| |                   summary_review=None                                   | |
| |               )                                                         | |
| |      kwargs = {                                                         | |
| |                   'config': {                                           | |
| |                       'tags': ['langsmith:hidden'],                     | |
| |                       'metadata': {},                                   | |
| |                       'callbacks':                                      | |
| |               <langchain_core.callbacks.manager.CallbackManager object  | |
| |               at 0x0000017BB9D69710>,                                   | |
| |                       'recursion_limit': 25,                            | |
| |                       'configurable': {                                 | |
| |                           '__pregel_send': <built-in method extend of   | |
| |               collections.deque object at 0x0000017BB9D7FA60>,          | |
| |                           '__pregel_read': functools.partial(<function  | |
| |               _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':        | |
| |               '2025-04-06T22:11:33.031231+00:00', 'channel_values': {}, | |
| |               'channel_versions': defaultdict(<class 'int'>,            | |
| |               {'__start__': 1, 'kritik_config': 2, 'changed_files': 2,  | |
| |               'file_contexts': 2, 'agent_results': 2,                   | |
| |               'inline_comments': 2, 'summary_review': 2,                | |
| |               'start:init_state': 2}), 'versions_seen':                 | |
| |               defaultdict(<function _seen_dict at 0x0000017BA2AFF4C0>,  | |
| |               {'__start__': defaultdict(<class 'int'>, {'__start__':    | |
| |               1}), 'init_state': defaultdict(<class 'int'>,             | |
| |               {'start:init_state': 2}), 'detect_changes':               | |
| |               defaultdict(<class 'int'>, {}), 'prepare_context':        | |
| |               defaultdict(<class 'int'>, {}), 'style_agent':            | |
| |               defaultdict(<class 'int'>, {}), 'bug_agent':              | |
| |               defaultdict(<class 'int'>, {}), 'context_agent':          | |
| |               defaultdict(<class 'int'>, {}), 'summary_agent':          | |
| |               defaultdict(<class 'int'>, {}), 'merge_results':          | |
| |               defaultdict(<class 'int'>, {}), 'format_output':          | |
| |               defaultdict(<class 'int'>, {}), 'post_inline':            | |
| |               defaultdict(<class 'int'>, {}), 'post_summary':           | |
| |               defaultdict(<class 'int'>, {})})}, {'kritik_config':      | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9C1E360>, 'changed_files':                     | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9C1E470>, 'file_contexts':                     | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D90F50>, 'agent_results':                     | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D91050>, 'inline_comments':                   | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D7F200>, 'summary_review':                    | |
| |               <langgraph.channels.last_value.LastValue object at        | |
| |               0x0000017BB9D7F2F0>, '__start__':                         | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D77CB0>, 'init_state':                     | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9CDF110>, 'detect_changes':                 | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB3D3F1D0>, 'prepare_context':                | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB3D3EC90>, 'style_agent':                    | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D1DA70>, 'bug_agent':                      | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D1DB20>, 'context_agent':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D48EB0>, 'summary_agent':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D63610>, 'merge_results':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D507A0>, 'format_output':                  | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D67850>, 'post_inline':                    | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D66850>, 'post_summary':                   | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D27930>, 'start:init_state':               | |
| |               <langgraph.channels.ephemeral_value.EphemeralValue object | |
| |               at 0x0000017BB9D279A0>}, deque([]))                       | |
| |                       }                                                 | |
| |                   }                                                     | |
| |               }                                                         | |
| | run_manager = <langchain_core.callbacks.manager.CallbackManagerForChaiЕ | |
| |               object at 0x0000017BB9C3F490>                             | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\pregel\write.py:70 in _write          |
|                                                                             |
|    67             for write in self.writes                                  |
|    68         ]                                                             |
|    69         values = [                                                    |
| >  70             val if write.mapper is None else write.mapper.invoke(val, |
|    71             for val, write in zip(values, self.writes)                |
|    72         ]                                                             |
|    73         values = [                                                    |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| | config = {                                                              | |
| |              'tags': ['langsmith:hidden'],                              | |
| |              'metadata': {},                                            | |
| |              'callbacks':                                               | |
| |          <langchain_core.callbacks.manager.CallbackManager object at    | |
| |          0x0000017BB9D69710>,                                           | |
| |              'recursion_limit': 25,                                     | |
| |              'configurable': {                                          | |
| |                  '__pregel_send': <built-in method extend of            | |
| |          collections.deque object at 0x0000017BB9D7FA60>,               | |
| |                  '__pregel_read': functools.partial(<function           | |
| |          _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':             | |
| |          '2025-04-06T22:11:33.031231+00:00', 'channel_values': {},      | |
| |          'channel_versions': defaultdict(<class 'int'>, {'__start__':   | |
| |          1, 'kritik_config': 2, 'changed_files': 2, 'file_contexts': 2, | |
| |          'agent_results': 2, 'inline_comments': 2, 'summary_review': 2, | |
| |          'start:init_state': 2}), 'versions_seen':                      | |
| |          defaultdict(<function _seen_dict at 0x0000017BA2AFF4C0>,       | |
| |          {'__start__': defaultdict(<class 'int'>, {'__start__': 1}),    | |
| |          'init_state': defaultdict(<class 'int'>, {'start:init_state':  | |
| |          2}), 'detect_changes': defaultdict(<class 'int'>, {}),         | |
| |          'prepare_context': defaultdict(<class 'int'>, {}),             | |
| |          'style_agent': defaultdict(<class 'int'>, {}), 'bug_agent':    | |
| |          defaultdict(<class 'int'>, {}), 'context_agent':               | |
| |          defaultdict(<class 'int'>, {}), 'summary_agent':               | |
| |          defaultdict(<class 'int'>, {}), 'merge_results':               | |
| |          defaultdict(<class 'int'>, {}), 'format_output':               | |
| |          defaultdict(<class 'int'>, {}), 'post_inline':                 | |
| |          defaultdict(<class 'int'>, {}), 'post_summary':                | |
| |          defaultdict(<class 'int'>, {})})}, {'kritik_config':           | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9C1E360>, 'changed_files':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9C1E470>, 'file_contexts':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D90F50>, 'agent_results':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D91050>, 'inline_comments':                        | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D7F200>, 'summary_review':                         | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D7F2F0>, '__start__':                              | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D77CB0>, 'init_state':                             | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9CDF110>, 'detect_changes':                         | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB3D3F1D0>, 'prepare_context':                        | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB3D3EC90>, 'style_agent':                            | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D1DA70>, 'bug_agent':                              | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D1DB20>, 'context_agent':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D48EB0>, 'summary_agent':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D63610>, 'merge_results':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D507A0>, 'format_output':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D67850>, 'post_inline':                            | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D66850>, 'post_summary':                           | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D27930>, 'start:init_state':                       | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D279A0>}, deque([]))                               | |
| |              }                                                          | |
| |          }                                                              | |
| |  input = ReviewState(                                                   | |
| |              kritik_config=Settings(                                    | |
| |                  platform='github',                                     | |
| |                  model='gpt-4',                                         | |
| |                  strategy='hybrid',                                     | |
| |                  repo='org/repo',                                       | |
| |                  pr_number='42'                                         | |
| |              ),                                                         | |
| |              changed_files=[],                                          | |
| |              file_contexts={},                                          | |
| |              agent_results={},                                          | |
| |              inline_comments=[],                                        | |
| |              summary_review=None                                        | |
| |          )                                                              | |
| |   self = ChannelWrite<init_state,kritik_config,changed_files,file_contЕ | |
| |          writes=[ChannelWriteEntry(channel='init_state',                | |
| |          value='init_state', skip_none=False, mapper=None),             | |
| |          ChannelWriteEntry(channel='kritik_config', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='changed_files', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='file_contexts', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='agent_results', value=<object       | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='inline_comments', value=<object     | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False)),                         | |
| |          ChannelWriteEntry(channel='summary_review', value=<object      | |
| |          object at 0x0000017B9EE12830>, skip_none=False,                | |
| |          mapper=_get_state_key(recurse=False))])                        | |
| | values = [                                                              | |
| |              'init_state',                                              | |
| |              ReviewState(                                               | |
| |                  kritik_config=Settings(                                | |
| |                      platform='github',                                 | |
| |                      model='gpt-4',                                     | |
| |                      strategy='hybrid',                                 | |
| |                      repo='org/repo',                                   | |
| |                      pr_number='42'                                     | |
| |                  ),                                                     | |
| |                  changed_files=[],                                      | |
| |                  file_contexts={},                                      | |
| |                  agent_results={},                                      | |
| |                  inline_comments=[],                                    | |
| |                  summary_review=None                                    | |
| |              ),                                                         | |
| |              ReviewState(                                               | |
| |                  kritik_config=Settings(                                | |
| |                      platform='github',                                 | |
| |                      model='gpt-4',                                     | |
| |                      strategy='hybrid',                                 | |
| |                      repo='org/repo',                                   | |
| |                      pr_number='42'                                     | |
| |                  ),                                                     | |
| |                  changed_files=[],                                      | |
| |                  file_contexts={},                                      | |
| |                  agent_results={},                                      | |
| |                  inline_comments=[],                                    | |
| |                  summary_review=None                                    | |
| |              ),                                                         | |
| |              ReviewState(                                               | |
| |                  kritik_config=Settings(                                | |
| |                      platform='github',                                 | |
| |                      model='gpt-4',                                     | |
| |                      strategy='hybrid',                                 | |
| |                      repo='org/repo',                                   | |
| |                      pr_number='42'                                     | |
| |                  ),                                                     | |
| |                  changed_files=[],                                      | |
| |                  file_contexts={},                                      | |
| |                  agent_results={},                                      | |
| |                  inline_comments=[],                                    | |
| |                  summary_review=None                                    | |
| |              ),                                                         | |
| |              ReviewState(                                               | |
| |                  kritik_config=Settings(                                | |
| |                      platform='github',                                 | |
| |                      model='gpt-4',                                     | |
| |                      strategy='hybrid',                                 | |
| |                      repo='org/repo',                                   | |
| |                      pr_number='42'                                     | |
| |                  ),                                                     | |
| |                  changed_files=[],                                      | |
| |                  file_contexts={},                                      | |
| |                  agent_results={},                                      | |
| |                  inline_comments=[],                                    | |
| |                  summary_review=None                                    | |
| |              ),                                                         | |
| |              ReviewState(                                               | |
| |                  kritik_config=Settings(                                | |
| |                      platform='github',                                 | |
| |                      model='gpt-4',                                     | |
| |                      strategy='hybrid',                                 | |
| |                      repo='org/repo',                                   | |
| |                      pr_number='42'                                     | |
| |                  ),                                                     | |
| |                  changed_files=[],                                      | |
| |                  file_contexts={},                                      | |
| |                  agent_results={},                                      | |
| |                  inline_comments=[],                                    | |
| |                  summary_review=None                                    | |
| |              ),                                                         | |
| |              ReviewState(                                               | |
| |                  kritik_config=Settings(                                | |
| |                      platform='github',                                 | |
| |                      model='gpt-4',                                     | |
| |                      strategy='hybrid',                                 | |
| |                      repo='org/repo',                                   | |
| |                      pr_number='42'                                     | |
| |                  ),                                                     | |
| |                  changed_files=[],                                      | |
| |                  file_contexts={},                                      | |
| |                  agent_results={},                                      | |
| |                  inline_comments=[],                                    | |
| |                  summary_review=None                                    | |
| |              )                                                          | |
| |          ]                                                              | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\utils.py:88 in invoke                 |
|                                                                             |
|    85                 if accepts_config(self.func)                          |
|    86                 else self.kwargs                                      |
|    87             )                                                         |
| >  88             ret = context.run(self.func, input, **kwargs)             |
|    89         if isinstance(ret, Runnable) and self.recurse:                |
|    90             return ret.invoke(input, config)                          |
|    91         return ret                                                    |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| |  config = {                                                             | |
| |               'tags': ['langsmith:hidden'],                             | |
| |               'metadata': {},                                           | |
| |               'callbacks':                                              | |
| |           <langchain_core.callbacks.manager.CallbackManager object at   | |
| |           0x0000017BB9D69710>,                                          | |
| |               'recursion_limit': 25,                                    | |
| |               'configurable': {                                         | |
| |                   '__pregel_send': <built-in method extend of           | |
| |           collections.deque object at 0x0000017BB9D7FA60>,              | |
| |                   '__pregel_read': functools.partial(<function          | |
| |           _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':            | |
| |           '2025-04-06T22:11:33.031231+00:00', 'channel_values': {},     | |
| |           'channel_versions': defaultdict(<class 'int'>, {'__start__':  | |
| |           1, 'kritik_config': 2, 'changed_files': 2, 'file_contexts':   | |
| |           2, 'agent_results': 2, 'inline_comments': 2,                  | |
| |           'summary_review': 2, 'start:init_state': 2}),                 | |
| |           'versions_seen': defaultdict(<function _seen_dict at          | |
| |           0x0000017BA2AFF4C0>, {'__start__': defaultdict(<class 'int'>, | |
| |           {'__start__': 1}), 'init_state': defaultdict(<class 'int'>,   | |
| |           {'start:init_state': 2}), 'detect_changes':                   | |
| |           defaultdict(<class 'int'>, {}), 'prepare_context':            | |
| |           defaultdict(<class 'int'>, {}), 'style_agent':                | |
| |           defaultdict(<class 'int'>, {}), 'bug_agent':                  | |
| |           defaultdict(<class 'int'>, {}), 'context_agent':              | |
| |           defaultdict(<class 'int'>, {}), 'summary_agent':              | |
| |           defaultdict(<class 'int'>, {}), 'merge_results':              | |
| |           defaultdict(<class 'int'>, {}), 'format_output':              | |
| |           defaultdict(<class 'int'>, {}), 'post_inline':                | |
| |           defaultdict(<class 'int'>, {}), 'post_summary':               | |
| |           defaultdict(<class 'int'>, {})})}, {'kritik_config':          | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9C1E360>, 'changed_files':                         | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9C1E470>, 'file_contexts':                         | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D90F50>, 'agent_results':                         | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D91050>, 'inline_comments':                       | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D7F200>, 'summary_review':                        | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D7F2F0>, '__start__':                             | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D77CB0>, 'init_state':                            | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9CDF110>, 'detect_changes':                        | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB3D3F1D0>, 'prepare_context':                       | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB3D3EC90>, 'style_agent':                           | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D1DA70>, 'bug_agent':                             | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D1DB20>, 'context_agent':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D48EB0>, 'summary_agent':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D63610>, 'merge_results':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D507A0>, 'format_output':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D67850>, 'post_inline':                           | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D66850>, 'post_summary':                          | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D27930>, 'start:init_state':                      | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D279A0>}, deque([]))                              | |
| |               }                                                         | |
| |           }                                                             | |
| | context = <_contextvars.Context object at 0x0000017BB9DA7AC0>           | |
| |   input = ReviewState(                                                  | |
| |               kritik_config=Settings(                                   | |
| |                   platform='github',                                    | |
| |                   model='gpt-4',                                        | |
| |                   strategy='hybrid',                                    | |
| |                   repo='org/repo',                                      | |
| |                   pr_number='42'                                        | |
| |               ),                                                        | |
| |               changed_files=[],                                         | |
| |               file_contexts={},                                         | |
| |               agent_results={},                                         | |
| |               inline_comments=[],                                       | |
| |               summary_review=None                                       | |
| |           )                                                             | |
| |  kwargs = {                                                             | |
| |               'key': 'kritik_config',                                   | |
| |               'config': {                                               | |
| |                   'tags': ['langsmith:hidden'],                         | |
| |                   'metadata': {},                                       | |
| |                   'callbacks':                                          | |
| |           <langchain_core.callbacks.manager.CallbackManager object at   | |
| |           0x0000017BB9D69710>,                                          | |
| |                   'recursion_limit': 25,                                | |
| |                   'configurable': {                                     | |
| |                       '__pregel_send': <built-in method extend of       | |
| |           collections.deque object at 0x0000017BB9D7FA60>,              | |
| |                       '__pregel_read': functools.partial(<function      | |
| |           _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':            | |
| |           '2025-04-06T22:11:33.031231+00:00', 'channel_values': {},     | |
| |           'channel_versions': defaultdict(<class 'int'>, {'__start__':  | |
| |           1, 'kritik_config': 2, 'changed_files': 2, 'file_contexts':   | |
| |           2, 'agent_results': 2, 'inline_comments': 2,                  | |
| |           'summary_review': 2, 'start:init_state': 2}),                 | |
| |           'versions_seen': defaultdict(<function _seen_dict at          | |
| |           0x0000017BA2AFF4C0>, {'__start__': defaultdict(<class 'int'>, | |
| |           {'__start__': 1}), 'init_state': defaultdict(<class 'int'>,   | |
| |           {'start:init_state': 2}), 'detect_changes':                   | |
| |           defaultdict(<class 'int'>, {}), 'prepare_context':            | |
| |           defaultdict(<class 'int'>, {}), 'style_agent':                | |
| |           defaultdict(<class 'int'>, {}), 'bug_agent':                  | |
| |           defaultdict(<class 'int'>, {}), 'context_agent':              | |
| |           defaultdict(<class 'int'>, {}), 'summary_agent':              | |
| |           defaultdict(<class 'int'>, {}), 'merge_results':              | |
| |           defaultdict(<class 'int'>, {}), 'format_output':              | |
| |           defaultdict(<class 'int'>, {}), 'post_inline':                | |
| |           defaultdict(<class 'int'>, {}), 'post_summary':               | |
| |           defaultdict(<class 'int'>, {})})}, {'kritik_config':          | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9C1E360>, 'changed_files':                         | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9C1E470>, 'file_contexts':                         | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D90F50>, 'agent_results':                         | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D91050>, 'inline_comments':                       | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D7F200>, 'summary_review':                        | |
| |           <langgraph.channels.last_value.LastValue object at            | |
| |           0x0000017BB9D7F2F0>, '__start__':                             | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D77CB0>, 'init_state':                            | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9CDF110>, 'detect_changes':                        | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB3D3F1D0>, 'prepare_context':                       | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB3D3EC90>, 'style_agent':                           | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D1DA70>, 'bug_agent':                             | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D1DB20>, 'context_agent':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D48EB0>, 'summary_agent':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D63610>, 'merge_results':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D507A0>, 'format_output':                         | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D67850>, 'post_inline':                           | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D66850>, 'post_summary':                          | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D27930>, 'start:init_state':                      | |
| |           <langgraph.channels.ephemeral_value.EphemeralValue object at  | |
| |           0x0000017BB9D279A0>}, deque([]))                              | |
| |                   }                                                     | |
| |               }                                                         | |
| |           }                                                             | |
| |    self = _get_state_key(recurse=False)                                 | |
| +-------------------------------------------------------------------------+ |
|                                                                             |
| C:\Users\Preslav\AppData\Local\pypoetry\Cache\virtualenvs\gitkritik2-Resbcx |
| f7-py3.13\Lib\site-packages\langgraph\graph\state.py:179 in _get_state_key  |
|                                                                             |
|   176             if input is None:                                         |
|   177                 return SKIP_WRITE                                     |
|   178             elif not isinstance(input, dict):                         |
| > 179                 raise InvalidUpdateError(f"Expected dict, got {input} |
|   180             else:                                                     |
|   181                 return input.get(key, SKIP_WRITE)                     |
|   182                                                                       |
|                                                                             |
| +-------------------------------- locals ---------------------------------+ |
| | config = {                                                              | |
| |              'tags': ['langsmith:hidden'],                              | |
| |              'metadata': {},                                            | |
| |              'callbacks':                                               | |
| |          <langchain_core.callbacks.manager.CallbackManager object at    | |
| |          0x0000017BB9D69710>,                                           | |
| |              'recursion_limit': 25,                                     | |
| |              'configurable': {                                          | |
| |                  '__pregel_send': <built-in method extend of            | |
| |          collections.deque object at 0x0000017BB9D7FA60>,               | |
| |                  '__pregel_read': functools.partial(<function           | |
| |          _local_read at 0x0000017BA3066C00>, {'v': 1, 'ts':             | |
| |          '2025-04-06T22:11:33.031231+00:00', 'channel_values': {},      | |
| |          'channel_versions': defaultdict(<class 'int'>, {'__start__':   | |
| |          1, 'kritik_config': 2, 'changed_files': 2, 'file_contexts': 2, | |
| |          'agent_results': 2, 'inline_comments': 2, 'summary_review': 2, | |
| |          'start:init_state': 2}), 'versions_seen':                      | |
| |          defaultdict(<function _seen_dict at 0x0000017BA2AFF4C0>,       | |
| |          {'__start__': defaultdict(<class 'int'>, {'__start__': 1}),    | |
| |          'init_state': defaultdict(<class 'int'>, {'start:init_state':  | |
| |          2}), 'detect_changes': defaultdict(<class 'int'>, {}),         | |
| |          'prepare_context': defaultdict(<class 'int'>, {}),             | |
| |          'style_agent': defaultdict(<class 'int'>, {}), 'bug_agent':    | |
| |          defaultdict(<class 'int'>, {}), 'context_agent':               | |
| |          defaultdict(<class 'int'>, {}), 'summary_agent':               | |
| |          defaultdict(<class 'int'>, {}), 'merge_results':               | |
| |          defaultdict(<class 'int'>, {}), 'format_output':               | |
| |          defaultdict(<class 'int'>, {}), 'post_inline':                 | |
| |          defaultdict(<class 'int'>, {}), 'post_summary':                | |
| |          defaultdict(<class 'int'>, {})})}, {'kritik_config':           | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9C1E360>, 'changed_files':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9C1E470>, 'file_contexts':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D90F50>, 'agent_results':                          | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D91050>, 'inline_comments':                        | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D7F200>, 'summary_review':                         | |
| |          <langgraph.channels.last_value.LastValue object at             | |
| |          0x0000017BB9D7F2F0>, '__start__':                              | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D77CB0>, 'init_state':                             | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9CDF110>, 'detect_changes':                         | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB3D3F1D0>, 'prepare_context':                        | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB3D3EC90>, 'style_agent':                            | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D1DA70>, 'bug_agent':                              | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D1DB20>, 'context_agent':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D48EB0>, 'summary_agent':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D63610>, 'merge_results':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D507A0>, 'format_output':                          | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D67850>, 'post_inline':                            | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D66850>, 'post_summary':                           | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D27930>, 'start:init_state':                       | |
| |          <langgraph.channels.ephemeral_value.EphemeralValue object at   | |
| |          0x0000017BB9D279A0>}, deque([]))                               | |
| |              }                                                          | |
| |          }                                                              | |
| |  input = ReviewState(                                                   | |
| |              kritik_config=Settings(                                    | |
| |                  platform='github',                                     | |
| |                  model='gpt-4',                                         | |
| |                  strategy='hybrid',                                     | |
| |                  repo='org/repo',                                       | |
| |                  pr_number='42'                                         | |
| |              ),                                                         | |
| |              changed_files=[],                                          | |
| |              file_contexts={},                                          | |
| |              agent_results={},                                          | |
| |              inline_comments=[],                                        | |
| |              summary_review=None                                        | |
| |          )                                                              | |
| |    key = 'kritik_config'                                                | |
| +-------------------------------------------------------------------------+ |
+-----------------------------------------------------------------------------+
InvalidUpdateError: Expected dict, got 
kritik_config=Settings(platform='github', model='gpt-4', strategy='hybrid', 
repo='org/repo', pr_number='42') changed_files=[] file_contexts={} 
agent_results={} inline_comments=[] summary_review=None
